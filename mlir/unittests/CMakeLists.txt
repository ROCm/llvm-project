# To silence warning caused by Wundef.
add_definitions(-DGTEST_NO_LLVM_SUPPORT=0)

function(add_mlir_unittest test_dirname)
  add_unittest(MLIRUnitTests ${test_dirname} ${ARGN})
endfunction()

add_subdirectory_optional_install(Analysis)
add_subdirectory_optional_install(Bytecode)
add_subdirectory_optional_install(Conversion)
add_subdirectory_optional_install(Debug)
add_subdirectory_optional_install(Dialect)
add_subdirectory_optional_install(Interfaces)
add_subdirectory_optional_install(IR)
add_subdirectory_optional_install(Parser)
add_subdirectory_optional_install(Pass)
add_subdirectory_optional_install(Support)
add_subdirectory_optional_install(Rewrite)
add_subdirectory_optional_install(TableGen)
add_subdirectory_optional_install(Target)
add_subdirectory_optional_install(Transforms)

if(MLIR_ENABLE_EXECUTION_ENGINE)
  add_subdirectory_optional_install(ExecutionEngine)
endif()
