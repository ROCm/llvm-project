# RUN: llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx900 -start-before=amdgpu-asm-printer -verify-machineinstrs -o - %s | FileCheck -check-prefix=GCN %s
---
# GCN-LABEL: foo:
# GCN:       ; %bb.0:
# GCN-NEXT:    ; divergent control-flow edge
# GCN-NEXT:    s_cbranch_execz .LBB0_2
# GCN-NEXT:    s_branch .LBB0_1
# GCN-NEXT:  .LBB0_1:
# GCN-NEXT:    s_branch .LBB0_2
# GCN-NEXT:  .LBB0_2:
# GCN-NEXT:    s_endpgm
name: foo
tracksRegLiveness: true
body: |
  bb.0:
    SI_WAVE_CF_EDGE implicit-def $scc
    S_CBRANCH_EXECZ %bb.2, implicit $exec
    S_BRANCH %bb.1
  bb.1:
    S_BRANCH %bb.2
  bb.2:
    S_ENDPGM 0
...
